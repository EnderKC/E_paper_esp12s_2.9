const unsigned char wifi_img [] PROGMEM = {
	// 'WiFi-QR, 96x96px
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0, 0x00, 0x0f, 0x07, 
	0xf0, 0xfe, 0x7e, 0x78, 0x01, 0xe2, 0x00, 0x03, 0x80, 0x00, 0x07, 0x07, 0xe0, 0x7c, 0x7e, 0x70, 
	0x00, 0xe0, 0x00, 0x03, 0x80, 0x00, 0x07, 0x07, 0xe0, 0x7c, 0x7e, 0x70, 0x00, 0xe0, 0x00, 0x03, 
	0x8f, 0xff, 0xc7, 0x1f, 0x18, 0x73, 0xf8, 0x06, 0x3f, 0xe3, 0xff, 0xe3, 0x8f, 0xff, 0xc7, 0x1f, 
	0x1c, 0x63, 0xf0, 0x0e, 0x3f, 0xe7, 0xff, 0xe3, 0x8f, 0xff, 0xc7, 0x1f, 0x1c, 0x63, 0xf0, 0x0e, 
	0x3f, 0xe7, 0xff, 0xe3, 0x8e, 0x01, 0xc7, 0x07, 0x00, 0x03, 0xff, 0x80, 0x01, 0xe7, 0x00, 0xe3, 
	0x8e, 0x01, 0xc7, 0x07, 0x00, 0x03, 0xff, 0x80, 0x00, 0xe7, 0x00, 0xe3, 0x8e, 0x01, 0xc7, 0x03, 
	0x00, 0x03, 0xff, 0x80, 0x00, 0xe7, 0x00, 0xe3, 0x8e, 0x01, 0xc7, 0xc0, 0xe0, 0x63, 0xfe, 0x0e, 
	0x38, 0xe7, 0x00, 0xe3, 0x8e, 0x01, 0xc7, 0xe0, 0xe0, 0x63, 0xfe, 0x0e, 0x38, 0xe7, 0x00, 0xe3, 
	0x8e, 0x01, 0xc7, 0xe0, 0xe0, 0x63, 0xfe, 0x0e, 0x39, 0xe7, 0x00, 0xe3, 0x8e, 0x01, 0xc7, 0xe7, 
	0xe0, 0x63, 0x81, 0xf1, 0xff, 0xe7, 0x00, 0xe3, 0x8e, 0x01, 0xc7, 0xe7, 0xe0, 0x63, 0x81, 0xf1, 
	0xff, 0xe7, 0x00, 0xe3, 0x8e, 0x01, 0xc7, 0xc7, 0xe0, 0x63, 0x81, 0xf1, 0xff, 0xe7, 0x00, 0xe3, 
	0x8f, 0xff, 0xc7, 0x1f, 0xe3, 0x9f, 0x80, 0x71, 0xc0, 0xe7, 0xff, 0xe3, 0x8f, 0xff, 0xc7, 0x1f, 
	0xe3, 0x9f, 0x80, 0x71, 0xc0, 0xe7, 0xff, 0xe3, 0x87, 0xff, 0xc7, 0x1f, 0xe3, 0x9f, 0x80, 0x31, 
	0xc0, 0xe3, 0xff, 0xe3, 0x80, 0x00, 0x07, 0x18, 0xe3, 0x9c, 0x71, 0x8e, 0x38, 0xe0, 0x00, 0x03, 
	0x80, 0x00, 0x07, 0x18, 0xe3, 0x9c, 0x71, 0x8e, 0x38, 0xe0, 0x00, 0x03, 0xff, 0xff, 0xff, 0x1f, 
	0xe3, 0x9f, 0x8e, 0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x1f, 0xe3, 0x9f, 0x8e, 0x00, 
	0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x1f, 0xe3, 0x9f, 0x8e, 0x00, 0x07, 0xff, 0xff, 0xff, 
	0xfe, 0x01, 0xc7, 0x00, 0xff, 0x83, 0xfe, 0x0f, 0xc0, 0x00, 0xfc, 0x03, 0xfe, 0x01, 0xc7, 0x00, 
	0xff, 0x83, 0xfe, 0x0f, 0xc0, 0x00, 0xfc, 0x03, 0xfe, 0x01, 0xc7, 0x00, 0xff, 0x83, 0xfe, 0x0f, 
	0xc0, 0x00, 0xfc, 0x03, 0xf1, 0xf0, 0x3f, 0xff, 0x1c, 0x60, 0x01, 0xf0, 0x3f, 0xff, 0xff, 0x03, 
	0xf1, 0xf0, 0x3f, 0xff, 0x1c, 0x60, 0x01, 0xf0, 0x3f, 0xff, 0xff, 0x03, 0xf1, 0xf0, 0x3f, 0xff, 
	0x1c, 0x60, 0x01, 0xf0, 0x3f, 0xff, 0xff, 0x03, 0xff, 0xf0, 0x07, 0x00, 0x03, 0xff, 0xfe, 0x71, 
	0xf8, 0xf8, 0x00, 0x1f, 0xff, 0xf0, 0x07, 0x00, 0x03, 0xff, 0xfe, 0x31, 0xf8, 0xf8, 0x00, 0x1f, 
	0xc3, 0xc0, 0x10, 0x00, 0x7f, 0x80, 0x78, 0x70, 0x78, 0xff, 0xf8, 0x03, 0x81, 0x80, 0x38, 0x00, 
	0xff, 0x80, 0x70, 0x70, 0x38, 0xff, 0xfc, 0x03, 0x81, 0x80, 0x38, 0x00, 0xff, 0x80, 0x70, 0x70, 
	0x38, 0xff, 0xfc, 0x03, 0x80, 0x70, 0x06, 0x1f, 0xe3, 0xe3, 0xf0, 0x00, 0xff, 0x38, 0xe3, 0x03, 
	0x80, 0x70, 0x07, 0x1f, 0xe3, 0xe3, 0xf0, 0x01, 0xff, 0x18, 0xe3, 0x03, 0x80, 0x70, 0x07, 0x1f, 
	0xe3, 0xe3, 0xf0, 0x01, 0xff, 0x18, 0xe3, 0x03, 0x8f, 0x8f, 0xf8, 0xe7, 0xe0, 0x03, 0x8f, 0x86, 
	0x3f, 0xe0, 0xff, 0x0f, 0x8f, 0x8f, 0xf8, 0xe7, 0xe0, 0x03, 0x8f, 0x8e, 0x3f, 0xe0, 0xff, 0x1f, 
	0x8f, 0x8f, 0xf8, 0xe7, 0xe0, 0x03, 0x8f, 0x8e, 0x3f, 0xe0, 0xff, 0x1f, 0x81, 0xf1, 0xc0, 0xe7, 
	0x03, 0x03, 0xf3, 0xff, 0xf8, 0xe7, 0x1f, 0x1f, 0x81, 0xf1, 0xc0, 0xe7, 0x03, 0x83, 0xf1, 0xff, 
	0xf8, 0xe7, 0x1f, 0x1f, 0x81, 0xf0, 0xc0, 0xc7, 0x03, 0x83, 0xf1, 0xff, 0xf0, 0xe7, 0x1f, 0x1f, 
	0xff, 0xf0, 0x38, 0x1f, 0x1f, 0xfc, 0x0e, 0x71, 0xc0, 0xe0, 0x1c, 0x1f, 0xff, 0xf0, 0x38, 0x1f, 
	0x1f, 0xfc, 0x0e, 0x71, 0xc0, 0xe0, 0x1c, 0x1f, 0xff, 0xf0, 0x18, 0x1f, 0x1f, 0xfc, 0x0c, 0x70, 
	0xc0, 0xe0, 0x1c, 0x0f, 0xfe, 0x0e, 0x07, 0x07, 0x1c, 0x7c, 0x70, 0x70, 0x3f, 0x1f, 0x03, 0x03, 
	0xfe, 0x0e, 0x07, 0x07, 0x1c, 0x7c, 0x70, 0x70, 0x3f, 0x1f, 0x03, 0x03, 0xfc, 0x0f, 0x0e, 0x07, 
	0x1c, 0xfc, 0x00, 0x78, 0x7f, 0x1d, 0x01, 0x03, 0xf0, 0x0f, 0xf8, 0xe7, 0x1f, 0xfc, 0x01, 0xff, 
	0xff, 0x18, 0xe0, 0x03, 0xf0, 0x0f, 0xf8, 0xe7, 0x1f, 0xfc, 0x01, 0xff, 0xff, 0x18, 0xe0, 0x03, 
	0xc0, 0x31, 0xe0, 0xf8, 0x1c, 0x00, 0x01, 0xc1, 0xf8, 0x00, 0xe3, 0xff, 0x80, 0x71, 0xc0, 0xf8, 
	0x1c, 0x00, 0x01, 0x81, 0xf8, 0x00, 0xe3, 0xff, 0x80, 0x31, 0xc0, 0xf8, 0x1c, 0x00, 0x01, 0x81, 
	0xf8, 0x00, 0xe3, 0xff, 0x80, 0x01, 0xff, 0x07, 0x1f, 0xe3, 0x81, 0xf0, 0x00, 0xc7, 0xe0, 0xff, 
	0x80, 0x01, 0xff, 0x07, 0x1f, 0xe3, 0x81, 0xf0, 0x00, 0xe7, 0xe0, 0xff, 0x80, 0x01, 0xff, 0x07, 
	0x1f, 0xe3, 0x81, 0xf0, 0x00, 0xc7, 0xe0, 0xff, 0x80, 0x01, 0xc7, 0xc7, 0xff, 0xff, 0xfc, 0x7e, 
	0x07, 0x07, 0x1c, 0xff, 0x80, 0x01, 0xc7, 0xe7, 0xff, 0xff, 0xfe, 0x7e, 0x07, 0x07, 0x1c, 0xff, 
	0x80, 0x01, 0xc7, 0xe7, 0xff, 0xff, 0xfe, 0x7e, 0x07, 0x07, 0x1c, 0xff, 0x81, 0xf0, 0x38, 0xff, 
	0x1f, 0xfc, 0x7f, 0x8f, 0xf8, 0xff, 0xfc, 0xe3, 0x81, 0xf0, 0x38, 0xff, 0x1f, 0xfc, 0x7f, 0x8f, 
	0xf8, 0xff, 0xfc, 0xe3, 0x81, 0xf0, 0x30, 0xff, 0x1f, 0xfc, 0x7f, 0x8f, 0xf9, 0xff, 0xfc, 0x63, 
	0x8e, 0x0e, 0x00, 0x1f, 0x03, 0x80, 0x0e, 0x7f, 0xff, 0xe7, 0xfc, 0x1f, 0x8e, 0x0e, 0x00, 0x1f, 
	0x03, 0x80, 0x0e, 0x7f, 0xff, 0xe7, 0xfc, 0x1f, 0x8f, 0x8f, 0xff, 0xe7, 0x00, 0x7c, 0x0f, 0x80, 
	0x38, 0x18, 0xe0, 0x63, 0x8f, 0x8f, 0xff, 0xe7, 0x00, 0x7c, 0x0f, 0x80, 0x38, 0x18, 0xe0, 0xe3, 
	0x8f, 0x8f, 0xff, 0xc3, 0x00, 0x7c, 0x0f, 0x80, 0x38, 0x18, 0xe0, 0xe3, 0x8f, 0xf1, 0xc0, 0x07, 
	0xe3, 0x83, 0xfe, 0x30, 0x38, 0x00, 0x1f, 0x1f, 0x8f, 0xf1, 0xc0, 0x07, 0xe3, 0x83, 0xfe, 0x70, 
	0x38, 0x00, 0x1f, 0x1f, 0x8f, 0xf1, 0xc0, 0x07, 0xe3, 0x83, 0xfc, 0x70, 0x38, 0x00, 0x1f, 0x1f, 
	0xff, 0xff, 0xff, 0x07, 0x1c, 0x00, 0x70, 0x7e, 0x00, 0xff, 0x1f, 0x1f, 0xff, 0xff, 0xff, 0x07, 
	0x1c, 0x00, 0x70, 0x7e, 0x00, 0xff, 0x1f, 0x1f, 0xff, 0xff, 0xff, 0x07, 0x1c, 0x00, 0x70, 0x3e, 
	0x00, 0xff, 0x1f, 0x1f, 0x80, 0x00, 0x07, 0xc7, 0x1c, 0x1f, 0x80, 0x0e, 0x38, 0xe7, 0x03, 0x1f, 
	0x80, 0x00, 0x07, 0xe7, 0x1c, 0x1f, 0x80, 0x0e, 0x38, 0xe7, 0x03, 0x1f, 0x80, 0x00, 0x07, 0xe7, 
	0x1c, 0x0d, 0x00, 0x0f, 0x00, 0xef, 0x00, 0x1f, 0x8f, 0xff, 0xc7, 0xff, 0x1f, 0x80, 0x70, 0x7f, 
	0xc0, 0xff, 0x00, 0x1f, 0x8f, 0xff, 0xc7, 0xff, 0x1f, 0x80, 0x70, 0x7f, 0xc0, 0xff, 0x00, 0x1f, 
	0x8e, 0x01, 0xc7, 0x07, 0x1c, 0x7c, 0x0c, 0x00, 0x30, 0x00, 0x00, 0x1f, 0x8e, 0x01, 0xc7, 0x07, 
	0x1c, 0x7c, 0x0e, 0x00, 0x38, 0x00, 0x00, 0x1f, 0x8e, 0x01, 0xc7, 0x07, 0x1c, 0x7c, 0x0e, 0x00, 
	0x38, 0x00, 0x00, 0x1f, 0x8e, 0x01, 0xc7, 0x1f, 0x03, 0xf0, 0x7e, 0x07, 0xc7, 0xf8, 0xff, 0x1f, 
	0x8e, 0x01, 0xc7, 0x1f, 0x03, 0xe0, 0x7e, 0x0f, 0xc7, 0xf8, 0xff, 0x1f, 0x8e, 0x01, 0xc7, 0x1f, 
	0x03, 0xe0, 0x7e, 0x0f, 0xc7, 0xf8, 0xff, 0x1f, 0x8e, 0x01, 0xc7, 0x1f, 0xff, 0x80, 0x7f, 0x8f, 
	0x00, 0x07, 0xe3, 0xff, 0x8e, 0x01, 0xc7, 0x1f, 0xff, 0x80, 0x7f, 0x8e, 0x00, 0x07, 0xe3, 0xff, 
	0x8e, 0x01, 0xc7, 0x3f, 0xff, 0x80, 0x7f, 0x86, 0x00, 0x07, 0xe3, 0xff, 0x8f, 0xff, 0xc7, 0xff, 
	0xe0, 0x63, 0x80, 0x00, 0x07, 0x1f, 0xfc, 0xff, 0x8f, 0xff, 0xc7, 0xff, 0xe0, 0x63, 0x80, 0x00, 
	0x07, 0x1f, 0xfc, 0xff, 0x8f, 0xff, 0xc7, 0xff, 0xe0, 0x63, 0x80, 0x00, 0x06, 0x1f, 0xfc, 0xff, 
	0x80, 0x00, 0x07, 0xe0, 0xe3, 0x9f, 0xfe, 0x70, 0x00, 0x18, 0x03, 0x1f, 0x80, 0x00, 0x07, 0xe0, 
	0xe3, 0x9f, 0xfe, 0x70, 0x00, 0x18, 0x03, 0x1f, 0xc0, 0x00, 0x0f, 0xe1, 0xe7, 0x9f, 0xfe, 0x78, 
	0x00, 0x3c, 0x07, 0x9f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
};


void initWifiManager()
{
    WiFiManager wifiManager;

    //调试用
    // wifiManager.resetSettings();
    // ESP.eraseConfig();

    display.fillScreen(GxEPD_WHITE);
    u8g2Fonts.setCursor(0, 16);
    u8g2Fonts.println("WIFI配置界面\n");
    u8g2Fonts.println("扫描二维码\n");
    u8g2Fonts.println("输入192.168.4.25\n");
    display.drawInvertedBitmap(180, 16, wifi_img, 96, 96, GxEPD_BLACK);
    display.nextPage();

    // 打印调试内容
    wifiManager.setDebugOutput(true);


    if (!wifiManager.autoConnect("E_paperWifi"))
    {
        Serial.println("failed to connect and hit timeout");
        // reset and try again, or maybe put it to deep sleep
        ESP.reset();
        delay(1000);
    }
    display.fillScreen(GxEPD_WHITE);
    u8g2Fonts.setCursor(140, 55);
    u8g2Fonts.println("连接成功！");
    delay(2000);
    display.nextPage();
    Serial.println("local ip");
    Serial.println(WiFi.localIP());
}
